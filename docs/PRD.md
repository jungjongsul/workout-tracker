# 운동 루틴 & 기록 대시보드 MVP PRD

## 핵심 정보

**목적**: Notion 데이터베이스에 기록된 운동 데이터를 시각적으로 정리된 대시보드로 조회하여 운동 습관을 파악할 수 있게 한다.
**사용자**: Notion으로 운동 기록을 관리하는 1인 사용자 (본인 전용 대시보드)

---

## 사용자 여정

```
1. 대시보드 진입 (workouts 페이지)
   ↓ 서버 컴포넌트가 Notion API에서 데이터 자동 조회

2. 주간 요약 카드 확인
   - 이번 주 운동 일수
   - 총 운동 시간
   - 평균 운동 시간
   ↓

3. 운동 목록 확인
   ↓ 필터 선택 또는 기간 변경

   [필터 없음] → 전체 운동 기록 테이블 표시
   [운동 종류 필터] → 해당 종류 기록만 표시
   [기간 필터] → 주간/월간 기록 표시
   ↓

4. 운동 기록 확인 완료
   → 필터 변경으로 다른 데이터 탐색
```

---

## 기능 명세

### 1. MVP 핵심 기능

| ID       | 기능명              | 설명                                                                 | MVP 필수 이유                   | 관련 페이지          |
| -------- | ------------------- | -------------------------------------------------------------------- | ------------------------------- | -------------------- |
| **F001** | Notion 데이터 조회  | NOTION_TOKEN, NOTION_DATABASE_ID 환경변수로 운동 기록 전체 조회      | 앱의 유일한 데이터 소스         | 운동 대시보드 페이지 |
| **F002** | 주간 요약 통계      | 이번 주 운동 일수, 총 운동 시간, 평균 운동 시간을 카드 형식으로 표시 | 핵심 가치 제공 (운동 습관 파악) | 운동 대시보드 페이지 |
| **F003** | 운동 기록 목록 표시 | 운동명, 종류, 세트/횟수, 날짜, 소요 시간, 기분을 테이블로 표시       | 기록 조회가 앱의 핵심 목적      | 운동 대시보드 페이지 |
| **F004** | 운동 종류 필터      | 상체/하체/유산소/유연성 등 ExerciseType Select 값으로 목록 필터링    | 데이터 탐색 편의성              | 운동 대시보드 페이지 |
| **F005** | 기간 필터           | 주간(이번 주) / 월간(이번 달) 기준으로 조회 범위 변경                | 데이터 탐색 편의성              | 운동 대시보드 페이지 |

### 2. MVP 필수 지원 기능

| ID       | 기능명         | 설명                                                    | MVP 필수 이유         | 관련 페이지          |
| -------- | -------------- | ------------------------------------------------------- | --------------------- | -------------------- |
| **F010** | 에러 상태 처리 | Notion API 조회 실패 시 에러 메시지 및 재시도 안내 표시 | API 연동 안정성 보장  | 운동 대시보드 페이지 |
| **F011** | 로딩 상태 처리 | 데이터 조회 중 스켈레톤 UI 또는 로딩 스피너 표시        | 사용자 경험 최소 보장 | 운동 대시보드 페이지 |

### 3. MVP 이후 기능 (제외)

- 운동 기록 추가/수정/삭제 (Notion에서 직접 관리)
- 차트/그래프 시각화 (recharts 등 라이브러리 필요)
- 사용자 인증 (개인 전용 대시보드이므로 환경변수 인증으로 대체)
- 운동 목표 설정 및 진척도 표시
- 푸시 알림 / 운동 리마인더

---

## 메뉴 구조

```
운동 대시보드 내비게이션
├── 주간 요약 섹션 - F002 (이번 주 통계 카드)
├── 필터 영역 - F004, F005 (종류 필터, 기간 필터)
└── 운동 기록 테이블 - F001, F003 (Notion 데이터 목록)

에러/로딩 상태 (공통)
├── 로딩 중 - F011 (스켈레톤 UI)
└── 에러 발생 - F010 (에러 메시지)
```

---

## 페이지별 상세 기능

### 운동 대시보드 페이지

> **구현 기능:** `F001`, `F002`, `F003`, `F004`, `F005`, `F010`, `F011` | **인증:** 없음 (환경변수로 API 인증)

| 항목            | 내용                                                                                                                                                                                                                                                                                                                                               |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | Notion 데이터베이스의 운동 기록을 시각적 대시보드로 표시하는 핵심 페이지                                                                                                                                                                                                                                                                           |
| **진입 경로**   | `/workouts` URL 직접 접근, 앱 실행 시 기본 진입점                                                                                                                                                                                                                                                                                                  |
| **사용자 행동** | 주간 요약 통계를 확인하고, 필터를 변경하여 원하는 기간/종류의 운동 기록을 탐색한다                                                                                                                                                                                                                                                                 |
| **주요 기능**   | - **WorkoutSummary**: 이번 주 운동 일수, 총 시간, 평균 시간 카드 3개 표시<br>- **WorkoutFilters**: ExerciseType Select 드롭다운, 기간(주간/월간) 버튼 토글<br>- **WorkoutList**: 날짜/운동명/종류/세트/횟수/시간/기분 컬럼의 테이블 표시<br>- 데이터 없음 상태: "기록된 운동이 없습니다" 안내 메시지<br>- **새로고침** 버튼 (Notion 데이터 재조회) |
| **다음 이동**   | 단일 페이지 앱 — 필터 변경 시 클라이언트 상태 업데이트, 에러 시 에러 UI 표시                                                                                                                                                                                                                                                                       |

---

## 데이터 모델

### Workout (Notion 데이터베이스 스키마)

| 필드         | 설명                                | 타입/관계          |
| ------------ | ----------------------------------- | ------------------ |
| id           | Notion 페이지 고유 ID               | string (UUID)      |
| title        | 운동명 (Notion Title 속성)          | string             |
| exerciseType | 운동 종류 (상체/하체/유산소/유연성) | string (Select)    |
| sets         | 세트 수                             | number             |
| reps         | 횟수                                | number             |
| date         | 운동 날짜                           | Date               |
| duration     | 소요 시간 (분)                      | number             |
| mood         | 기분 (좋음/보통/피로함)             | string (Select)    |
| notes        | 메모 (선택)                         | string (Rich Text) |

### WorkoutSummary (클라이언트 계산 통계)

| 필드          | 설명                          | 타입/관계 |
| ------------- | ----------------------------- | --------- |
| totalDays     | 해당 기간 총 운동 일수        | number    |
| totalDuration | 해당 기간 총 운동 시간 (분)   | number    |
| avgDuration   | 평균 운동 시간 (분)           | number    |
| periodLabel   | 기간 라벨 (이번 주 / 이번 달) | string    |

---

## 기술 스택 (최신 버전)

### 프론트엔드 프레임워크

- **Next.js 15.5.3** (App Router + Turbopack) - React 풀스택 프레임워크, 서버 컴포넌트로 Notion API 직접 호출
- **TypeScript 5.x** (strict mode) - 타입 안전성 보장, Notion API 응답 타입 정의
- **React 19.1.0** - UI 라이브러리

### 스타일링 & UI

- **TailwindCSS v4** (설정 파일 없는 새로운 CSS 엔진) - 유틸리티 CSS 프레임워크
- **shadcn/ui** (new-york style) - Card, Table, Select, Badge, Skeleton 컴포넌트 활용
- **Lucide React** - 아이콘 라이브러리 (운동 종류 아이콘 등)

### 외부 API 연동

- **@notionhq/client** - Notion 공식 JavaScript SDK
- **NOTION_TOKEN** - Notion Integration Secret Key (환경변수)
- **NOTION_DATABASE_ID** - 운동 기록 데이터베이스 ID (환경변수)

### 배포 & 호스팅

- **Vercel** - Next.js 15 최적화 배포 플랫폼, 환경변수 관리

### 패키지 관리

- **npm** - 의존성 관리

---

## 구현 참고사항

### Notion API 연동 방식

서버 컴포넌트에서 직접 Notion API를 호출하므로 API 키가 클라이언트에 노출되지 않습니다.

```
lib/notion.ts     → Notion 클라이언트 초기화 및 데이터 조회 함수
types/workout.ts  → Notion API 응답을 Workout 타입으로 변환하는 파서
```

### 필터 처리 방식

URL searchParams를 활용하여 필터 상태를 관리합니다. 필터 변경 시 페이지가 서버에서 재렌더링되어 Notion 데이터를 다시 조회합니다.

```
/workouts?type=상체&period=week
/workouts?period=month
/workouts (필터 없음 = 전체)
```

### 환경변수 설정

```
NOTION_TOKEN=secret_xxxx
NOTION_DATABASE_ID=xxxx
```
